---
title: "Midterm 1, STATS 531/631 W26"
author: "In class on 2/16"
format:
  pdf:
    pdf-engine: xelatex
    toc: false
jupyter: python3
csl: ecology.csl
---


```{python}
#| label: preliminaries
#| echo: false

# Configuration flags
ALL = True
SOL = True
# SOL = False
QLABELS = True
EXAM = False
# EXAM = True

if EXAM:
    ALL = False
    SOL = False
    QLABELS = False

# Note: Python packages are imported in setup block below
```

\newcommand\exam[1]{#1}
<!-- \renewcommand\exam[1]{} to remove exam formatting -->
\renewcommand\exam[1]{}

```{python}
#| label: setup
#| echo: false

import os
import glob
import random
import numpy as np

# Set random seed for reproducibility
random.seed(48)
np.random.seed(48)

def q_setup(n):
    """
    Setup question files for category n.

    Creates temporary .qmd files for each question in category n,
    adding question labels and solution includes, then concatenates them.

    Parameters:
    -----------
    n : int
        Question category number (1-7)

    Returns:
    --------
    str : Path to concatenated temporary file (tmpN.qmd)
    """
    # Find all question directories for this category
    q_dirs = sorted(glob.glob(f"Q{n}-*"))
    cat_file = f"tmp{n}.qmd"

    # Create temporary files for each question directory
    for q_dir in q_dirs:
        q_file = os.path.join(q_dir, "q.qmd")
        q_tmp = os.path.join(q_dir, "tmp.qmd")

        # Create temporary file with question label, content, and solution
        with open(q_tmp, 'w') as f:
            # Add question label block
            results_option = 'asis' if QLABELS else 'hide'
            f.write(f"```{{python}}\n")
            f.write(f"#| echo: false\n")
            f.write(f"#| results: {results_option}\n")
            f.write(f"my_dir = '{q_dir}'\n")
            f.write(f"print(f'**{{my_dir}}.**')\n")
            f.write(f"```\n\n")

            # Append question content
            with open(q_file, 'r') as qf:
                f.write(qf.read())

            # Add solution block
            f.write(f"\n```{{python}}\n")
            f.write(f"#| child: {q_dir}/sol.qmd\n")
            f.write(f"#| eval: {str(SOL).lower()}\n")
            f.write(f"```\n\n")

    # Concatenate all question files
    q_files = [os.path.join(d, "tmp.qmd") for d in q_dirs]
    if not ALL:
        q_files = [random.choice(q_files)]

    with open(cat_file, 'w') as cf:
        for qf in q_files:
            with open(qf, 'r') as f:
                cf.write(f.read())

    return cat_file

```



\newcommand\var{\mathrm{Var}}
\newcommand\varSample{\mathrm{var}}
\newcommand\cov{\mathrm{Cov}}
\newcommand\covSample{\mathrm{cov}}
\newcommand\cor{\mathrm{Cor}}
\newcommand\corSample{\mathrm{cor}}

\exam{\vspace{1.5cm}

{\bf Name: \hspace{6cm} UMID: }

\vspace{1.5cm}

}

```{python}
#| results: asis
#| echo: false
#| eval: !expr ALL
if ALL:
    print("**This document produces different random tests each time the source code generating it is run. The actual midterm will be a realization generated by this random process, or something similar.**")
```

```{python}
#| results: asis
#| echo: false
#| eval: !expr ALL
if ALL:
    print("**This version lists all the questions currently in the test generator. The actual test will have one question sampled from each of the 7 question categories.**")
```

**Instructions. The test is closed book, and you are not allowed access to any notes. Any electronic devices in your possession must be turned off and remain in a bag on the floor.**

**For each question, circle one letter answer and provide some supporting reasoning.**


\exam{\newpage}

### Q1. Stationarity and unit roots.

```{python}
#| label: q1-setup
#| include: false
cat_file1 = q_setup(1)
```

```{python}
#| label: q1
#| child: !expr cat_file1
```

\exam{\newpage}

### Q2. Calculations for ARMA models

```{python}
#| label: q2-setup
#| include: false
cat_file2 = q_setup(2)
```

```{python}
#| label: q2
#| child: !expr cat_file2
```

\exam{\newpage}


### Q3. Likelihood-based inference for ARMA models

```{python}
#| label: q3-setup
#| include: false
cat_file3 = q_setup(3)
```

```{python}
#| label: q3
#| child: !expr cat_file3
```

\exam{\newpage}

### Q4. Interpreting diagnostics

```{python}
#| label: q4-setup
#| include: false
cat_file4 = q_setup(4)
```

```{python}
#| label: q4
#| child: !expr cat_file4
```

\exam{\newpage}

### Q5. The frequency domain

```{python}
#| label: q5-setup
#| include: false
cat_file5 = q_setup(5)
```

```{python}
#| label: q5
#| child: !expr cat_file5
```

\exam{\newpage}

### Q6. Scholarship for time series projects

```{python}
#| label: q6-setup
#| include: false
cat_file6 = q_setup(6)
```

```{python}
#| label: q6
#| child: !expr cat_file6
```

### Q7. Data analysis

```{python}
#| label: q7-setup
#| include: false
cat_file7 = q_setup(7)
```

```{python}
#| label: q7
#| child: !expr cat_file7
```



\exam{\vfill}

------



License: This material is provided under a [Creative Commons license](https://ionides.github.io/531w26/LICENSE)<br>



------
