---
title: "Midterm 1, STATS 531/631 W26"
author: "In class on 2/16"
format:
  pdf:
    pdf-engine: xelatex
    toc: false
csl: ecology.csl
---


```{r}
#| label: preliminaries
#| echo: false
#| cache: false
ALL <- TRUE
#SOL <- TRUE
SOL <- FALSE
QLABELS <- TRUE
EXAM <- FALSE
#EXAM <- TRUE
if(EXAM){
  ALL <- FALSE
  SOL <- FALSE
  QLABELS <- FALSE
}

# install necessary packages
packages <- c("png","tidyverse","tseries","rmarkdown")
installed_packages <- installed.packages()[,1]
options(repos=structure(c(CRAN="https://repo.miserver.it.umich.edu/cran/")))
install_if_not_installed <- function(pkg) {
  if (!pkg%in%installed_packages) install.packages(pkg,dependencies = TRUE, quiet=TRUE)
}
invisible(sapply(packages, install_if_not_installed))

```

\newcommand\exam[1]{#1}
<!-- \renewcommand\exam[1]{} to remove exam formatting -->
\renewcommand\exam[1]{}

```{r}
#| label: setup
#| echo: false
#| cache: false
# library(mat2tex)
library(png)
set.seed(48)
knitr::opts_chunk$set(cache = FALSE)

q_setup <- function(n){
  q_dirs <- list.files(pattern=paste0("^Q",n,"-"))
  cat_file <- paste0("tmp",n,".qmd")
  #
  # first add lines so each question knows its directory
  #
  for(q_dir in q_dirs){
    q_file <- paste(q_dir,"/q.qmd",sep="")
    q_tmp <- paste(q_dir,"/tmp.qmd",sep="")
    file.create(q_tmp)
    write(c(
      "```{r}",
      "#| echo: false",
      "#| results: !expr ifelse(QLABELS,'asis','hide')",
      paste("my_dir <- '",q_dir,"'",sep=""),
      "cat('**',my_dir,'.**',sep='')",
      "```"),
      file=q_tmp,append=TRUE
    )
    file.append(q_tmp,q_file)
    write(c(
      "```{r}",
      "#| child: !expr paste(my_dir,'/sol.qmd',sep='')",
      "#| eval: !expr SOL",
      "``` \n"
    ),file=q_tmp,append=TRUE)
  }
  #
  # Then concatenate these enhanced question files
  #
  q_files <- paste(q_dirs,"/tmp.qmd",sep="")
  if(!ALL) q_files <- sample(q_files,size=1)
  file.create(cat_file)
  file.append(cat_file,q_files)
  cat_file
}

```



\newcommand\var{\mathrm{Var}}
\newcommand\varSample{\mathrm{var}}
\newcommand\cov{\mathrm{Cov}}
\newcommand\covSample{\mathrm{cov}}
\newcommand\cor{\mathrm{Cor}}
\newcommand\corSample{\mathrm{cor}}

\exam{\vspace{1.5cm}

{\bf Name: \hspace{6cm} UMID: }

\vspace{1.5cm}

}

```{r}
#| results: asis
#| echo: false
#| purl: false
#| eval: !expr ALL
cat("**This document produces different random tests each time the source code generating it is run. The actual midterm will be a realization generated by this random process, or something similar.**")
```

```{r}
#| results: asis
#| echo: false
#| purl: false
#| eval: !expr ALL
cat("**This version lists all the questions currently in the test generator. The actual test will have one question sampled from each of the 7 question categories.**")
```

**Instructions. The test is closed book, and you are not allowed access to any notes. Any electronic devices in your possession must be turned off and remain in a bag on the floor.**

**For each question, circle one letter answer and provide some supporting reasoning.**


\exam{\newpage}

### Q1. Stationarity and unit roots.

```{r}
#| label: q1-setup
#| include: false
cat_file1 <- q_setup(1)
```

```{r}
#| label: q1
#| child: !expr cat_file1
```

\exam{\newpage}

### Q2. Calculations for ARMA models

```{r}
#| label: q2-setup
#| include: false
cat_file2 <- q_setup(2)
```

```{r}
#| label: q2
#| child: !expr cat_file2
```

\exam{\newpage}


### Q3. Likelihood-based inference for ARMA models

```{r}
#| label: q3-setup
#| include: false
cat_file3 <- q_setup(3)
```

```{r}
#| label: q3
#| child: !expr cat_file3
```

\exam{\newpage}

### Q4. Interpreting diagnostics

```{r}
#| label: q4-setup
#| include: false
cat_file4 <- q_setup(4)
```

```{r}
#| label: q4
#| child: !expr cat_file4
```

\exam{\newpage}

### Q5. The frequency domain

```{r}
#| label: q5-setup
#| include: false
cat_file5 <- q_setup(5)
```

```{r}
#| label: q5
#| child: !expr cat_file5
```

\exam{\newpage}

### Q6. Scholarship for time series projects

```{r}
#| label: q6-setup
#| include: false
cat_file6 <- q_setup(6)
```

```{r}
#| label: q6
#| child: !expr cat_file6
```

### Q7. Data analysis

```{r}
#| label: q7-setup
#| include: false
cat_file7 <- q_setup(7)
```

```{r}
#| label: q7
#| child: !expr cat_file7
```



\exam{\vfill}

------



License: This material is provided under a [Creative Commons license](https://ionides.github.io/531w26/LICENSE)<br>



------
